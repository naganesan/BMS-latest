<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>BMS Watcher</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="container">
    <header>
      <h1>BMS Watcher (Pro)</h1>
      <p>Watch cinema pages for upcoming movie link (identifier like <code>ET00445596</code>).</p>
    </header>

    <main>
      <section class="form-card">
        <label>Location
          <input id="locationInput" placeholder="Type or pick a location" autocomplete="off" />
          <div id="locSuggestions" class="suggestions"></div>
        </label>

        <label>Cinema
          <input id="cinemaInput" placeholder="Pick a cinema (shows suggestions when active)" autocomplete="off" />
          <div id="cinSuggestions" class="suggestions"></div>
        </label>

        <label>Upcoming (Movie — allow some time to load)
          <input id="movieInput" placeholder="Pick upcoming movie (auto-scraped)" autocomplete="off" />
          <div id="movieSuggestions" class="suggestions"></div>
        </label>

        <!-- New booking settings -->
        <fieldset class="booking-settings">
          <legend>Booking settings (optional — used by automatic booking)</legend>

          <label>Show Index
            <input id="showIndexInput" placeholder="show_index (number)" type="number" />
          </label>

          <label>Seat Quantity
            <input id="seatQtyInput" placeholder="seat_quantity (number)" type="number" />
          </label>

          <label>Target Seat
            <input id="targetSeatInput" placeholder="e.g. C12" />
          </label>

          <label>Next Seats (comma-separated)
            <input id="nextSeatsInput" placeholder="e.g. F13,G08" />
          </label>

          <label>Email
            <input id="emailInput" placeholder="email for booking" type="email" />
          </label>

          <label>Mobile Number
            <input id="mobileInput" placeholder="mobile number for booking" />
          </label>
        </fieldset>

        <div class="controls">
          <button id="createTaskBtn">Create Task</button>
          <button id="enableSoundBtn">Enable Alarm (click to check browser audio)</button>
          <button id="stopAllAlarmsBtn" title="Stop all client-side alarms">Stop All Alarms</button>
        </div>
        <div id="formStatus" class="muted small"></div>
      </section>

      <section class="tasks-card">
        <h2>Tasks</h2>
        <div id="tasksList" class="tasks-list"></div>
      </section>
    </main>
  </div>

  <audio id="alarmAudio" preload="auto">
    <source src="/alarm.mp3" type="audio/mpeg" />
    Your browser does not support audio playback.
  </audio>

  <!-- Modal shown when we detect found tasks but autoplay blocked -->
  <div id="alarmModal" class="alarm-modal" role="dialog" aria-hidden="true">
    <div class="card">
      <h2 id="alarmModalTitle">Movie available!</h2>
      <p id="alarmModalText">We detected a matching booking link. Click Play Alarm to be notified or Open Found Link to go there now.</p>
      <div id="alarmModalButtons">
        <button id="alarmModalPlay" class="play">Play Alarm</button>
        <button id="alarmModalOpen" class="open">Open Found Link</button>
        <button id="alarmModalStop" class="stop">Stop Alarm</button>
      </div>
    </div>
  </div>

  <script src="/script.js"></script>
</body>
</html>



